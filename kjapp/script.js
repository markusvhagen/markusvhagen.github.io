let ageStandardsFemale = [
[1208, 2520, 6204, 14424],
[1155, 2403, 5826, 13272],
[1108, 2302, 5509, 12353],
[1067, 2215, 5239, 11605],
[1031, 2138, 5007, 10991],
[999, 2071, 4808, 10481],
[970, 2013, 4636, 10058],
[945, 1962, 4486, 9704],
[922, 1917, 4356, 9410],
[902, 1878, 4243, 9165],
[884, 1844, 4145, 8966],
[867, 1813, 4056, 8790],
[850, 1783, 3971, 8621],
[838, 1758, 3897, 8458],
[834, 1740, 3841, 8302],
[834, 1729, 3802, 8161],
[834, 1726, 3780, 8046],
[834, 1726, 3772, 7954],
[834, 1726, 3772, 7884],
[834, 1726, 3772, 7835],
[834, 1726, 3772, 7805],
[834, 1726, 3772, 7796],
[834, 1726, 3772, 7796],
[835, 1726, 3773, 7798],
[836, 1728, 3775, 7802],
[837, 1729, 3780, 7809],
[839, 1732, 3786, 7819],
[842, 1736, 3794, 7833],
[845, 1740, 3804, 7849],
[848, 1745, 3816, 7869],
[852, 1751, 3830, 7891],
[856, 1758, 3845, 7917],
[861, 1765, 3863, 7946],
[866, 1774, 3883, 7979],
[872, 1783, 3905, 8015],
[878, 1794, 3929, 8054],
[885, 1805, 3955, 8096],
[892, 1817, 3984, 8143],
[900, 1831, 4015, 8193],
[909, 1845, 4049, 8247],
[919, 1860, 4085, 8306],
[929, 1877, 4124, 8368],
[939, 1895, 4166, 8435],
[949, 1914, 4211, 8506],
[960, 1935, 4259, 8583],
[971, 1956, 4309, 8664],
[982, 1979, 4361, 8751],
[993, 2002, 4414, 8843],
[1005, 2025, 4468, 8940],
[1017, 2049, 4523, 9045],
[1029, 2073, 4580, 9156],
[1041, 2098, 4638, 9273],
[1054, 2124, 4699, 9396],
[1067, 2150, 4760, 9524],
[1081, 2177, 4823, 9653],
[1094, 2205, 4887, 9788],
[1108, 2233, 4954, 9926],
[1123, 2262, 5022, 10067],
[1138, 2292, 5092, 10214],
[1153, 2323, 5164, 10363],
[1169, 2354, 5239, 10518],
[1185, 2387, 5315, 10678],
[1202, 2420, 5394, 10841],
[1219, 2454, 5475, 11011],
[1236, 2489, 5559, 11185],
[1254, 2526, 5644, 11366],
[1273, 2563, 5733, 11553],
[1292, 2601, 5825, 11745],
[1312, 2641, 5920, 11944],
[1332, 2681, 6017, 12157],
[1353, 2724, 6118, 12394],
[1375, 2769, 6225, 12658],
[1397, 2819, 6345, 12948],
[1421, 2874, 6479, 13272],
[1448, 2936, 6627, 13629],
[1479, 3004, 6792, 14029],
[1512, 3080, 6976, 14475],
[1550, 3164, 7181, 14969],
[1591, 3257, 7409, 15527],
[1637, 3361, 7665, 16151],
[1689, 3478, 7954, 16860],
[1747, 3608, 8279, 17666],
[1811, 3755, 8647, 18584],
[1884, 3920, 9069, 19647],
[1967, 4109, 9552, 20878],
[2061, 4325, 10110, 22332],
[2169, 4573, 10765, 24062],
[2294, 4863, 11535, 26144],
[2439, 5203, 12457, 28715],
[2610, 5609, 13578, 31938],
[2814, 6101, 14974, 36126],
[3061, 6706, 16742, 41757],
[3366, 7469, 19060, 49688],
[3752, 8457, 22241, 61775],
[4253, 9790, 26828, 82236],
[4929, 12172, 34043, 124736]
]

let ageStandardsMale = [
[1265, 3122, 5676, 11900],
[1154, 2790, 6434, 14242],
[1068, 2537, 5704, 12689],
[1000, 2340, 5168, 11523],
[946, 2184, 4761, 10621],
[903, 2058, 4446, 9910],
[868, 1955, 4199, 9342],
[840, 1871, 4005, 8883],
[817, 1801, 3853, 8512],
[800, 1745, 3734, 8211],
[788, 1699, 3645, 7970],
[780, 1662, 3581, 7780],
[773, 1634, 3539, 7616],
[769, 1613, 3504, 7474],
[769, 1600, 3468, 7368],
[769, 1589, 3451, 7293],
[769, 1584, 3451, 7249],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[769, 1584, 3451, 7235],
[770, 1585, 3451, 7235],
[772, 1586, 3452, 7235],
[774, 1589, 3457, 7235],
[778, 1593, 3465, 7235],
[783, 1599, 3476, 7235],
[788, 1605, 3490, 7236],
[794, 1613, 3507, 7250],
[800, 1622, 3528, 7283],
[806, 1632, 3553, 7334],
[812, 1644, 3581, 7395],
[818, 1657, 3610, 7458],
[824, 1670, 3639, 7522],
[830, 1683, 3669, 7586],
[836, 1697, 3700, 7652],
[843, 1710, 3731, 7719],
[849, 1724, 3763, 7787],
[856, 1739, 3795, 7856],
[863, 1753, 3828, 7927],
[869, 1768, 3861, 7999],
[876, 1783, 3895, 8072],
[883, 1798, 3930, 8147],
[891, 1813, 3964, 8223],
[898, 1829, 4000, 8300],
[905, 1845, 4037, 8379],
[913, 1861, 4074, 8459],
[920, 1878, 4112, 8541],
[928, 1895, 4150, 8624],
[936, 1912, 4189, 8710],
[944, 1929, 4229, 8796],
[952, 1947, 4270, 8885],
[961, 1965, 4312, 8975],
[969, 1983, 4353, 9068],
[978, 2002, 4397, 9162],
[987, 2021, 4441, 9258],
[995, 2041, 4486, 9356],
[1005, 2061, 4532, 9456],
[1014, 2081, 4578, 9559],
[1023, 2102, 4626, 9663],
[1034, 2123, 4675, 9770],
[1046, 2145, 4725, 9880],
[1059, 2167, 4778, 9992],
[1073, 2193, 4837, 10112],
[1088, 2221, 4902, 10244],
[1105, 2252, 4974, 10391],
[1123, 2286, 5053, 10551],
[1143, 2324, 5139, 10730],
[1165, 2365, 5234, 10924],
[1188, 2410, 5339, 11139],
[1214, 2460, 5454, 11374],
[1242, 2514, 5580, 11634],
[1273, 2573, 5717, 11917],
[1306, 2638, 5869, 12232],
[1343, 2710, 6036, 12576],
[1384, 2789, 6221, 12959],
[1428, 2876, 6426, 13381],
[1477, 2972, 6654, 13852],
[1532, 3080, 6908, 14375],
[1592, 3199, 7191, 14964],
[1660, 3333, 7510, 15623],
[1736, 3484, 7872, 16372],
[1822, 3655, 8282, 17222],
[1920, 3849, 8754, 18201],
[2032, 4073, 9299, 19329],
[2163, 4331, 9937, 20654],
[2314, 4634, 10691, 22214],
[2494, 4994, 11596, 24093],
[2709, 5427, 12697, 26376],
[2971, 5955, 14074, 29232],
[3300, 6617, 15830, 32871],
[3720, 7468, 18154, 37702],
]

function formatTime(seconds) {
  let h = Math.floor(seconds/3600);
  let m = Math.floor( (seconds-h*3600)/60 );
  let s = Math.floor(seconds-h*3600-m*60);

  // Some formatting: if m or s is under  10 we add a 0 in front.
  m = (m < 10) ? ("0" + m) : m;
  s = (s < 10) ? ("0" + s) : s;

  return h + ":" + m + ":" + s;
}

let form = document.getElementById("form");
form.addEventListener("change", function() {
  let gender = document.querySelector('input[name="gender"]:checked')?.value;
  let age = document.getElementById("age").value;
  let distance = document.querySelector('input[name="distance"]:checked')?.value;
  let timeHH = document.getElementById("timeHH").value;
  let timeMM = document.getElementById("timeMM").value;
  let timeSS = document.getElementById("timeSS").value;

  if (age.value != "" && (timeHH.value != "" && timeMM.value != "" && timeSS.value != "") ) {
    let ageStandards = (gender == "male") ? ageStandardsMale[parseInt(age) - 5] : ageStandardsFemale[parseInt(age)-5];

    timeHH = Number.isNaN(timeHH.value) ? timeHH = 0 : Number(timeHH);
    timeMM = Number.isNaN(timeMM.value) ? timeMM = 0 : Number(timeMM);
    timeSS = Number.isNaN(timeSS.value) ? timeSS = 0 : Number(timeSS);
    let totalTimeInSeconds = timeHH*3600 + timeMM*60 + timeSS;

    let ageGrading = 0
    switch(distance) {
      case "5K":
        ageGrading = ageStandards[0]/totalTimeInSeconds;
        break;
      case "10K":
        ageGrading = ageStandards[1]/totalTimeInSeconds;
        break;
      case "HM":
        ageGrading = ageStandards[2]/totalTimeInSeconds;
        break;
      case "M":
        ageGrading = ageStandards[3]/totalTimeInSeconds;
        break;
    }
    if (ageGrading != 0 && totalTimeInSeconds != 0) {
      document.getElementById("output").innerHTML = "<b>Ekvivalente tider:</b> <br> <b>5K: </b>" + formatTime(ageStandards[0]/ageGrading) + "<br> <b>10K: </b>" + formatTime(ageStandards[1]/ageGrading) + "<br> <b>HM: </b>" + formatTime(ageStandards[2]/ageGrading) + "<br> <b>M: </b>" + formatTime(ageStandards[3]/ageGrading);
    }
  }
});
